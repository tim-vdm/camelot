{% macro hypo_header(title, date, full_number, additional_header_lines=[], recipient='', name='', street='', zipcode='', city='', extra=none) %}
<table>
    <tr><td colspan="3">&nbsp;</td></tr>
    <tr><td colspan="3">&nbsp;</td></tr>
    <tr>
        <td width="35%" valign="top">
            <p>
                {{title}}: {{full_number}}<br>
                {{_('date')|capitalize}}: {{date}}<br>
                {% if additional_header_lines %}{{additional_header_lines|join('<br>')}}{% endif %}
            </p>
        </td>
        <td width="25%" valign="top">
        </td>
        <td valign="top">
            {% include 'partials/recipient_BE.html' %}
        </td>
    </tr>
    <tr><td colspan="3">&nbsp;</td></tr>
    <tr><td colspan="3">&nbsp;</td></tr>
</table>
{%- if extra -%}
    {{extra}}
{%- endif -%}
<hr>
{% endmacro %}

{% macro table(rows, title=none, first_row_header=false, checkbox=false, color_cycle=true, alignments=none) -%}
    {% if title %}<h3>{{ title }}</h3>{% endif %}
    <table width="100%">
      {% for row in rows %}
        {% if first_row_header and loop.first %}
            <tr style="background:#999; color: white;">
              {% for column in row -%}
                <td align="center"><b>{{ column }}</b></td>
                {% if checkbox and loop.last %}
                    <td>&nbsp;</td>
                {% endif %}
              {%- endfor %}
            </tr>
        {% else %}
        	<tr{% if color_cycle %} class="{{ loop.cycle('odd', 'even') }}"{% endif %}>
        	  {% for i, column in row|enum %}
                {% if alignments %}
                    <td align="{{ alignments[i] }}">
                {% else %}
                    <td>
                {% endif %}
                {{ column }}</td>
                {% if checkbox and loop.last %}
                    <td align="center">&#9744;</td>
                {% endif %}
        	  {% endfor %}
        	</tr>
        {% endif %}
      {% endfor %}
    </table>
{%- endmacro %}

{% macro tr(value, label=none, class=none) -%}
    <tr{% if class %} class="{{class}}"{% endif %}>
        {% if label %}<td class="label">{{ label|safe }}</td>{% endif %}
        <td align="right"{% if label==none %} colspan="2"{% endif %}>{{value|safe}}</td>
    </tr>
{%- endmacro %}

{% macro checklist_no_values(labels, title=none, date=true) -%}
    {#
    :param labels: list of labels
    :param title: string
    #}
    {% if title %}<h3>{{title}}</h3>{% endif %}
    <table width="100%">
        {% for label in labels -%}
        <tr class="{{ loop.cycle('odd', 'even') }}">
            <td>{{label|safe}}</td>
            <td width="4%" align="center">&#9744;</td>
            {% if date %}<td width="12%" align="center">__/__/20__</td>{% endif %}
        </tr>
        {% endfor %}
    </table>
{%- endmacro %}

{% macro checklists_no_values(items_collection, title=none, date=true) -%}
    {#
    :param labels: list of tuples (title, [label])
    :param title: string
    :param date: boolean
    #}
    {% if title %}<h3>{{title}}</h3>{% endif %}
    <table width="100%">
        <tr>
            {% for subtitle, items in items_collection %}
            <td valign="top">
                {{ checklist_no_values(items, subtitle, date=date) }}
            </td>
            {% endfor %}
        </tr>
    </table>
{% endmacro %}

{% macro checklist(items, title=none, date=true) -%}
    {#
    :param items: list of tuples (label, value)
    :param title: string
    #}
    {% if title %}<h3>{{title}}</h3>{% endif %}
    <table width="100%">
        {% for label, value in items -%}
        <tr class="{{ loop.cycle('odd', 'even') }}">
            {% if label %}<td>{{label|safe}}</td>{% endif %}
            <td width="4%" align="center">&#9744;</td>
            <td{% if not label %} colspan="2"{% endif %}>{{value|safe}}</td>
            {% if date %}<td width="12%" align="center">__/__/20__</td>{% endif %}
        </tr>
        {% endfor %}
    </table>
{%- endmacro %}

{% macro checklists(items_collection, title=none, date=true) -%}
    {#
    :param items: list of tuples (title, [(label, value)])
    :param title: string or none
    :param date: boolean
    TODO limit columns here
    #}
    {% if title %}<h3>{{title}}</h3>{% endif %}
    <table width="100%">
        <tr>
            {% for title, items in items_collection %}
            <td valign="top">
                {{ checklist(items, title, date=date) }}
            </td>
            {% endfor %}
        </tr>
    </table>
{% endmacro %}
