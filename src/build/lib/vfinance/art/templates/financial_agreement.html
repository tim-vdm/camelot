{% extends 'vfinance_base.html' %}
{% set internal_document = true %}

{% block content %}

{{ agreement.product }}<br/>
{{ agreement.account }}<br/>
{{ agreement.agreement_date }}<br/>
{{ agreement.from_date }}<br/>
{{ agreement.broker_agent }}<br/>

<br/>
{% for role in agreement.roles %}
    {{role.name}} {{role.described_by}} {{role.rank}} <br/>
{% endfor %}
<br/>

<br/>
{% for agreed_item in agreement.agreed_items %}
    {{agreed_item.rank}} {{agreed_item.described_by}}<br/>
    {{agreed_item.shown_clause}}<br/>
{% endfor %}
<br/>

<h2>Premium Schedules</h2>

{% for premium_schedule_data in premium_schedules_data %}
    Duration : {{premium_schedule_data.premium_schedule.duration}} months, from {{premium_schedule_data.premium_schedule.from_date}} thru {{premium_schedule_data.premium_schedule.thru_date}} <br/> 
    Amount : {{premium_schedule_data.premium_schedule.amount}}<br/> 
    Period : {{premium_schedule_data.premium_schedule.period_type}}<br/> 
    Planned premiums : {{premium_schedule_data.premium_schedule.planned_premiums}}<br/> 
    Direct debit : {{premium_schedule_data.premium_schedule.direct_debit}}<br/> 
    Fulfilled : {{premium_schedule_data.premium_schedule.fulfilled}}<br/> 
    <br>
    <table>
    {% for amount_type, amount_value in premium_schedule_data.amounts %}
        <tr><td>{{amount_type}}</td><td align="right">{{amount_value}}</td></tr>
    {% endfor %}
    </table>
    
    <h3>Insurance coverages:</h3>
    {% for coverage in premium_schedule_data.premium_schedule.agreed_coverages %}
        {{coverage.coverage_for.type}} {{coverage.coverage_limit}}<br/>
    {% endfor %}

    <table>
        <tr>
            <th>date</th>
            <th>provision</th>
            <th>interest</th>
            <th>additional_interest</th>
            <th>insured capital</th>
            <th>q / 1000</th>
            <th>risk</td>
        </tr>
       {% for provision_data in premium_schedule_data.provisions_data %}
           <tr>
                <td>{{provision_data.date}}</td>
                <td align="right">{{provision_data.provision}}</td>
                <td align="right">{{provision_data.interest}}</td>
                <td align="right">{{provision_data.additional_interest}}</td>
                <td align="right">{{provision_data.insured_capital}}</td>
                <td align="right">{{provision_data.q * 365 * 1000}}</td>
                <td align="right">{{provision_data.risk}}</td>
           </tr>
       {% endfor %}
    
{% endfor %}
{% endblock %}